---
title: "è®¾è®¡æ¨¡å¼åœ¨å‰ç«¯å¼€å‘ä¸­çš„åº”ç”¨"
description: "æ·±å…¥æ¢è®¨å¸¸ç”¨è®¾è®¡æ¨¡å¼åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­çš„å®é™…åº”ç”¨ï¼ŒåŒ…æ‹¬å•ä¾‹æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ç­‰ã€‚"
date: "2024-01-15"
author: "æ¶æ„å¸ˆå¼ ä¸‰"
category: "æ¶æ„è®¾è®¡"
tags: ["è®¾è®¡æ¨¡å¼", "å‰ç«¯æ¶æ„", "JavaScript", "TypeScript"]
image: "https://images.unsplash.com/photo-1618477247222-acbdb0e159b3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2340&q=80"
featured: true
readingTime: 12
---

# è®¾è®¡æ¨¡å¼åœ¨å‰ç«¯å¼€å‘ä¸­çš„åº”ç”¨

è®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ç»å…¸è§£å†³æ–¹æ¡ˆï¼Œåœ¨å‰ç«¯å¼€å‘ä¸­åˆç†åº”ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥è®©ä»£ç æ›´åŠ ä¼˜é›…ã€å¯ç»´æŠ¤ã€‚

## 1. å•ä¾‹æ¨¡å¼ (Singleton Pattern)

### åº”ç”¨åœºæ™¯
- å…¨å±€çŠ¶æ€ç®¡ç†
- API å®¢æˆ·ç«¯å®ä¾‹
- é…ç½®ç®¡ç†å™¨

### å®ç°ç¤ºä¾‹

```typescript
class ApiClient {
  private static instance: ApiClient;
  private baseURL: string;

  private constructor() {
    this.baseURL = process.env.NEXT_PUBLIC_API_URL || '';
  }

  public static getInstance(): ApiClient {
    if (!ApiClient.instance) {
      ApiClient.instance = new ApiClient();
    }
    return ApiClient.instance;
  }

  async get(endpoint: string) {
    return fetch(`${this.baseURL}${endpoint}`);
  }
}

// ä½¿ç”¨
const api = ApiClient.getInstance();
```

## 2. è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern)

### åº”ç”¨åœºæ™¯
- äº‹ä»¶ç³»ç»Ÿ
- çŠ¶æ€å˜åŒ–é€šçŸ¥
- ç»„ä»¶é—´é€šä¿¡

### å®ç°ç¤ºä¾‹

```typescript
class EventEmitter {
  private events: { [key: string]: Function[] } = {};

  on(event: string, callback: Function) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(callback);
  }

  emit(event: string, data?: any) {
    if (this.events[event]) {
      this.events[event].forEach(callback => callback(data));
    }
  }

  off(event: string, callback: Function) {
    if (this.events[event]) {
      this.events[event] = this.events[event].filter(cb => cb !== callback);
    }
  }
}

// React Hook å°è£…
function useEventEmitter() {
  const [emitter] = useState(() => new EventEmitter());
  return emitter;
}
```

## 3. ç­–ç•¥æ¨¡å¼ (Strategy Pattern)

### åº”ç”¨åœºæ™¯
- è¡¨å•éªŒè¯
- æ”¯ä»˜æ–¹å¼é€‰æ‹©
- æ•°æ®æ ¼å¼åŒ–

### å®ç°ç¤ºä¾‹

```typescript
// éªŒè¯ç­–ç•¥
interface ValidationStrategy {
  validate(value: string): boolean;
  errorMessage: string;
}

class EmailValidation implements ValidationStrategy {
  errorMessage = "è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€";
  
  validate(value: string): boolean {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value);
  }
}

class PhoneValidation implements ValidationStrategy {
  errorMessage = "è¯·è¾“å…¥æœ‰æ•ˆçš„æ‰‹æœºå·ç ";
  
  validate(value: string): boolean {
    return /^1[3-9]\d{9}$/.test(value);
  }
}

// éªŒè¯å™¨
class Validator {
  private strategy: ValidationStrategy;

  constructor(strategy: ValidationStrategy) {
    this.strategy = strategy;
  }

  setStrategy(strategy: ValidationStrategy) {
    this.strategy = strategy;
  }

  validate(value: string) {
    return {
      isValid: this.strategy.validate(value),
      message: this.strategy.errorMessage
    };
  }
}

// React ç»„ä»¶ä¸­ä½¿ç”¨
function FormField({ type, value }: { type: 'email' | 'phone', value: string }) {
  const getValidator = () => {
    switch (type) {
      case 'email': return new Validator(new EmailValidation());
      case 'phone': return new Validator(new PhoneValidation());
      default: throw new Error('Unknown validation type');
    }
  };

  const validator = getValidator();
  const result = validator.validate(value);
  
  return (
    <div>
      <input value={value} />
      {!result.isValid && <span className="error">{result.message}</span>}
    </div>
  );
}
```

## 4. å·¥å‚æ¨¡å¼ (Factory Pattern)

### åº”ç”¨åœºæ™¯
- ç»„ä»¶åˆ›å»º
- ä¸»é¢˜åˆ‡æ¢
- é…ç½®ç”Ÿæˆ

### å®ç°ç¤ºä¾‹

```typescript
// ä¸»é¢˜å·¥å‚
interface Theme {
  primary: string;
  secondary: string;
  background: string;
}

class LightTheme implements Theme {
  primary = '#007bff';
  secondary = '#6c757d';
  background = '#ffffff';
}

class DarkTheme implements Theme {
  primary = '#0d6efd';
  secondary = '#6c757d';
  background = '#121212';
}

class ThemeFactory {
  static createTheme(type: 'light' | 'dark'): Theme {
    switch (type) {
      case 'light': return new LightTheme();
      case 'dark': return new DarkTheme();
      default: throw new Error('Unknown theme type');
    }
  }
}

// React Hook
function useTheme() {
  const [themeType, setThemeType] = useState<'light' | 'dark'>('light');
  const theme = useMemo(() => ThemeFactory.createTheme(themeType), [themeType]);
  
  return { theme, setThemeType };
}
```

## 5. è£…é¥°å™¨æ¨¡å¼ (Decorator Pattern)

### åº”ç”¨åœºæ™¯
- HOC (é«˜é˜¶ç»„ä»¶)
- ä¸­é—´ä»¶
- åŠŸèƒ½å¢å¼º

### å®ç°ç¤ºä¾‹

```typescript
// ç¼“å­˜è£…é¥°å™¨
function withCache<T extends (...args: any[]) => any>(fn: T): T {
  const cache = new Map();
  
  return ((...args: Parameters<T>) => {
    const key = JSON.stringify(args);
    if (cache.has(key)) {
      return cache.get(key);
    }
    
    const result = fn(...args);
    cache.set(key, result);
    return result;
  }) as T;
}

// æ—¥å¿—è£…é¥°å™¨
function withLogging<T extends (...args: any[]) => any>(fn: T): T {
  return ((...args: Parameters<T>) => {
    console.log(`Calling ${fn.name} with args:`, args);
    const result = fn(...args);
    console.log(`${fn.name} returned:`, result);
    return result;
  }) as T;
}

// ä½¿ç”¨
const cachedApiCall = withCache(
  withLogging(async (endpoint: string) => {
    return fetch(endpoint).then(res => res.json());
  })
);
```

## æ€»ç»“

è®¾è®¡æ¨¡å¼åœ¨å‰ç«¯å¼€å‘ä¸­çš„åˆç†åº”ç”¨å¯ä»¥ï¼š

- ğŸ“ˆ **æé«˜ä»£ç è´¨é‡**: ä½¿ä»£ç æ›´åŠ æ¸…æ™°ã€å¯è¯»
- ğŸ”§ **å¢å¼ºå¯ç»´æŠ¤æ€§**: é™ä½ä»£ç è€¦åˆåº¦
- ğŸš€ **æå‡å¼€å‘æ•ˆç‡**: æä¾›æ ‡å‡†åŒ–çš„è§£å†³æ–¹æ¡ˆ
- ğŸ›¡ï¸ **å‡å°‘é”™è¯¯**: ç»è¿‡éªŒè¯çš„è®¾è®¡æ¨¡å¼é™ä½bugé£é™©

é€‰æ‹©åˆé€‚çš„è®¾è®¡æ¨¡å¼éœ€è¦æ ¹æ®å…·ä½“åœºæ™¯å’Œéœ€æ±‚ï¼Œè¿‡åº¦ä½¿ç”¨åè€Œå¯èƒ½å¢åŠ å¤æ‚æ€§ã€‚å…³é”®æ˜¯è¦ç†è§£æ¯ç§æ¨¡å¼çš„é€‚ç”¨åœºæ™¯ï¼Œåœ¨åˆé€‚çš„æ—¶å€™åº”ç”¨åˆé€‚çš„æ¨¡å¼ã€‚ 