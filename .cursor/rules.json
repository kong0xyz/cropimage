{
  "rules": {
    "communication": {
      "language": "中文",
      "style": "专业且友好",
      "code_comments": "双语（中文和英文）"
    },
    "project": {
      "tech_stack": {
        "framework": {
          "name": "Next.js",
          "version": "^15.0.0"
        },
        "styling": {
          "framework": "TailwindCSS",
          "version": "^4.0.0",
          "ui_library": "shadcn/ui",
          "icons": ["lucide-react", "@tabler/icons-react"]
        },
        "package_manager": "pnpm",
        "database": {
          "provider": "Supabase",
          "orm": "Drizzle ORM"
        },
        "internationalization": {
          "framework": "next-intl",
          "resource_path": "messages/",
          "development_flow": {
            "primary_language": "en",
            "secondary_language": "zh",
            "translation_process": "功能稳定后进行其他语言翻译"
          }
        },
        "authentication": {
          "solutions": [
            {
              "name": "Clerk",
              "features": ["认证", "支付"],
              "priority": 1
            },
            {
              "name": "Custom Implementation",
              "auth": "better_auth",
              "payment": "Stripe",
              "priority": 2
            }
          ]
        }
      },
      "code_style": {
        "indentation": "2空格",
        "quotes": "单引号",
        "semicolons": true
      },
      "naming_conventions": {
        "components": "PascalCase",
        "functions": "camelCase",
        "constants": "UPPER_SNAKE_CASE",
        "files": "kebab-case",
        "i18n_keys": "camelCase.nested.structure"
      }
    },
    "documentation": {
      "required_sections": [
        "功能描述",
        "使用方法",
        "参数说明",
        "返回值",
        "示例"
      ],
      "language": "中文",
      "api_documentation": {
        "swagger": true,
        "endpoint_description": "双语"
      }
    },
    "git": {
      "commit_message_format": {
        "type": ["feat", "fix", "docs", "style", "refactor", "test", "chore"],
        "scope": "可选",
        "subject": "中文描述"
      },
      "branch_naming": "feature/fix/docs-描述"
    },
    "testing": {
      "framework": "Jest",
      "coverage_threshold": 80,
      "required_test_types": ["单元测试", "集成测试", "端到端测试"]
    },
    "security": {
      "sensitive_data": {
        "storage": "环境变量",
        "transmission": "加密传输"
      },
      "authentication": {
        "clerk": {
          "environment": {
            "required_vars": [
              "NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY",
              "CLERK_SECRET_KEY"
            ]
          }
        },
        "better_auth": {
          "environment": {
            "required_vars": ["JWT_SECRET", "AUTH_SECRET"]
          }
        }
      },
      "payment": {
        "stripe": {
          "environment": {
            "required_vars": [
              "STRIPE_SECRET_KEY",
              "STRIPE_WEBHOOK_SECRET",
              "NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY"
            ]
          }
        }
      },
      "database": {
        "supabase": {
          "environment": {
            "required_vars": [
              "NEXT_PUBLIC_SUPABASE_URL",
              "NEXT_PUBLIC_SUPABASE_ANON_KEY",
              "SUPABASE_SERVICE_ROLE_KEY"
            ]
          }
        }
      }
    },
    "development_workflow": {
      "i18n": {
        "primary_development": "en.json",
        "secondary_development": "zh.json",
        "translation_timing": "功能稳定后进行其他语言翻译",
        "resource_structure": {
          "path": "messages/",
          "files": ["en.json", "zh.json", "other_languages.json"]
        }
      },
      "database": {
        "migrations": {
          "tool": "Drizzle Kit",
          "commands": {
            "generate": "pnpm drizzle-kit generate:pg",
            "push": "pnpm drizzle-kit push:pg"
          }
        }
      }
    },
    "seo": {
      "metadata": {
        "configuration": {
          "location": "messages/[locale].json",
          "structure": {
            "global": {
              "path": "meta.global",
              "required_fields": ["title", "description", "keywords"]
            },
            "page_specific": {
              "path": "meta.[page]",
              "required_fields": ["title", "description", "keywords"]
            }
          },
          "constraints": {
            "title": {
              "length": {
                "min": 50,
                "max": 60,
                "unit": "characters"
              },
              "format": "主标题 | 副标题 | 网站名"
            },
            "description": {
              "length": {
                "min": 140,
                "max": 160,
                "unit": "characters"
              },
              "requirements": [
                "包含页面核心关键词",
                "描述主要功能或价值",
                "包含行动召唤语句"
              ]
            },
            "keywords": {
              "count": {
                "min": 3,
                "max": 5
              },
              "format": "关键词1,关键词2,关键词3"
            }
          }
        }
      },
      "internal_linking": {
        "required_elements": {
          "breadcrumbs": {
            "required": true,
            "format": "首页 > 分类 > 当前页面",
            "schema_markup": true
          },
          "related_content": {
            "types": ["相关功能", "相关博客", "相关文档"],
            "count_per_type": {
              "min": 3,
              "max": 5
            },
            "placement": "页面底部或侧边栏"
          },
          "navigation_links": {
            "header": ["主导航", "功能导航"],
            "footer": ["站点地图", "重要链接"]
          }
        }
      },
      "content_structure": {
        "required_sections": {
          "usage_guide": {
            "required": true,
            "components": ["步骤说明", "使用示例", "最佳实践"]
          },
          "faqs": {
            "required": true,
            "min_questions": 3,
            "schema_markup": true,
            "structure": {
              "question": "清晰的问题描述",
              "answer": "详细的解答说明"
            }
          },
          "annotations": {
            "types": ["提示说明", "警告提示", "补充说明"],
            "placement": "相关内容附近"
          }
        },
        "text_ratio": {
          "minimum_ratio": "40%",
          "recommendation": "页面文字内容占比不低于40%"
        }
      },
      "on_page_optimization": {
        "heading_structure": {
          "h1": {
            "count": 1,
            "content": "与页面标题相关，包含主要关键词"
          },
          "h2_h6": {
            "structure": "合理的层级结构",
            "keywords": "包含相关关键词"
          }
        },
        "image_optimization": {
          "required_attributes": {
            "alt": "描述性的替代文本",
            "title": "补充的标题文本",
            "loading": "lazy"
          },
          "format": {
            "preferred": ["WebP", "AVIF"],
            "fallback": ["PNG", "JPEG"]
          }
        },
        "url_structure": {
          "format": "kebab-case",
          "pattern": "/[category]/[subcategory]/[page-name]",
          "length": "简洁且描述性",
          "localization": "/{locale}/[rest-of-path]"
        },
        "schema_markup": {
          "required_types": ["WebPage", "BreadcrumbList", "FAQPage"],
          "conditional_types": {
            "Article": "博客页面",
            "Product": "功能页面",
            "HowTo": "教程页面"
          }
        },
        "performance": {
          "core_web_vitals": {
            "LCP": "< 2.5s",
            "FID": "< 100ms",
            "CLS": "< 0.1"
          },
          "optimization_rules": [
            "使用静态生成 (SSG)",
            "实现增量静态再生成 (ISR)",
            "合理的缓存策略"
          ]
        },
        "mobile_optimization": {
          "required": true,
          "viewport": "responsive",
          "font_size": "最小16px",
          "touch_targets": "最小44px"
        }
      },
      "content_quality": {
        "text_requirements": {
          "originality": "原创内容",
          "depth": "深入详细的说明",
          "accuracy": "准确的技术信息",
          "freshness": "定期更新"
        },
        "readability": {
          "paragraph_length": "2-3句话",
          "sentence_length": "15-25个字",
          "language_style": "专业但易懂"
        }
      },
      "social_media": {
        "open_graph": {
          "required": true,
          "properties": {
            "og:title": "同 meta title",
            "og:description": "同 meta description",
            "og:image": {
              "size": "1200x630px",
              "format": "WebP with JPEG fallback",
              "content": "包含品牌标识和关键视觉元素"
            },
            "og:type": "website/article",
            "og:locale": "与页面语言对应"
          }
        },
        "twitter_cards": {
          "required": true,
          "card_type": "summary_large_image",
          "properties": ["title", "description", "image"]
        }
      },
      "keyword_optimization": {
        "density": {
          "primary_keyword": "1.5-2.5%",
          "secondary_keywords": "0.5-1.5%"
        },
        "placement": {
          "required_locations": [
            "URL",
            "Title Tag",
            "H1",
            "First Paragraph",
            "Image Alt Text",
            "Last Paragraph"
          ]
        },
        "long_tail": {
          "integration": "自然融入内容",
          "variation": "使用同义词和相关词"
        }
      },
      "technical_seo": {
        "xml_sitemaps": {
          "types": ["pages.xml", "blog.xml", "features.xml", "images.xml"],
          "update_frequency": "每日",
          "priority_rules": {
            "homepage": 1.0,
            "features": 0.9,
            "blog_posts": 0.8,
            "other_pages": 0.6
          }
        },
        "robots_txt": {
          "required_rules": [
            "User-agent directives",
            "Sitemap locations",
            "Rate limiting rules"
          ]
        },
        "internationalization": {
          "hreflang": {
            "required": true,
            "implementation": "link 标签和 sitemap",
            "coverage": "所有语言版本互相引用"
          }
        },
        "sitemap": {
          "current_implementation": {
            "location": "sitemap.xml",
            "type": "unified",
            "update_frequency": "自动生成"
          },
          "future_implementation": {
            "structure": "分类式站点地图",
            "files": [
              {
                "name": "sitemap-pages.xml",
                "content": "静态页面和功能页面",
                "priority": "0.8-1.0"
              },
              {
                "name": "sitemap-blog.xml",
                "content": "博客文章",
                "priority": "0.6-0.8",
                "changefreq": "weekly"
              },
              {
                "name": "sitemap-features.xml",
                "content": "工具和功能页面",
                "priority": "0.8-0.9"
              },
              {
                "name": "sitemap-images.xml",
                "content": "重要图片资源",
                "priority": "0.5"
              }
            ],
            "index_sitemap": {
              "name": "sitemap-index.xml",
              "content": "引用所有分类站点地图"
            },
            "generation": {
              "method": "自动生成",
              "trigger": ["内容更新", "新页面添加", "定时任务"]
            }
          }
        }
      },
      "metadata_implementation": {
        "social_media": {
          "implementation": {
            "function": "constructMetadata",
            "location": "lib/seoutils.ts",
            "usage": "统一使用此函数构建所有元数据",
            "supported_metadata": [
              "基础 meta 标签",
              "Open Graph 标签",
              "Twitter Cards 标签"
            ],
            "parameters": {
              "title": "页面标题",
              "description": "页面描述",
              "keywords": "关键词列表",
              "images": "社交媒体图片",
              "locale": "当前语言"
            }
          }
        }
      }
    },
    "monetization": {
      "ad_placement": {
        "google_adsense": {
          "required_units": {
            "in_content": {
              "desktop": {
                "max_ads": 3,
                "placement": ["内容开始前", "内容中间", "内容结束后"],
                "responsive": true
              },
              "mobile": {
                "max_ads": 2,
                "placement": ["内容开始前", "内容结束后"],
                "responsive": true
              }
            },
            "sidebar": {
              "desktop_only": true,
              "type": "sticky",
              "max_height": "600px"
            }
          },
          "excluded_pages": ["登录页", "支付页", "错误页"]
        },
        "custom_ads": {
          "affiliate_links": {
            "disclosure": "必须明确标注推广内容",
            "placement": "相关内容上下文中",
            "styling": "与内容区分但保持一致性"
          },
          "sponsored_content": {
            "labeling": "明确标注赞助内容",
            "quality": "与站点内容质量一致",
            "relevance": "与页面主题相关"
          }
        }
      },
      "premium_features": {
        "subscription_model": {
          "tiers": ["免费版", "基础版", "专业版", "企业版"],
          "feature_matrix": {
            "required": true,
            "comparison_table": true,
            "highlight_recommended": true
          }
        },
        "usage_limits": {
          "free_tier": {
            "daily_requests": "限制次数",
            "feature_restrictions": "基础功能"
          },
          "paid_tiers": {
            "increased_limits": "阶梯式提升",
            "additional_features": "独特功能"
          }
        }
      },
      "conversion_optimization": {
        "cta_placement": {
          "primary_cta": {
            "location": "页面顶部可视区域",
            "style": "突出且醒目",
            "text": "清晰的价值主张"
          },
          "secondary_cta": {
            "location": ["内容阅读中断点", "相关功能介绍后", "页面底部"],
            "style": "不影响阅读体验"
          }
        },
        "social_proof": {
          "required_elements": ["用户评价", "使用数据", "客户案例", "媒体报道"],
          "placement": "转化关键位置",
          "update_frequency": "每月更新"
        },
        "a_b_testing": {
          "elements": ["标题文案", "CTA按钮", "产品定价", "功能展示方式"],
          "metrics": ["点击率", "转化率", "留存率"]
        }
      },
      "analytics": {
        "required_tracking": {
          "google_analytics": {
            "events": ["页面访问", "功能使用", "转化行为", "用户行为"],
            "custom_dimensions": ["用户类型", "功能类别", "内容主题"]
          },
          "conversion_tracking": {
            "goals": ["注册转化", "付费转化", "功能使用"],
            "funnels": "完整转化漏斗跟踪"
          }
        },
        "reporting": {
          "frequency": "每周",
          "metrics": ["流量指标", "转化指标", "收入指标", "用户行为指标"]
        }
      }
    }
  }
}
