---
description:
globs:
alwaysApply: false
---
# 认证和支付实现规则

## 方案选择
### 方案一：Clerk（优先）
- 提供完整的认证和支付功能
- 环境变量要求：
  * NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY
  * CLERK_SECRET_KEY

### 方案二：自定义实现
- 认证：better_auth
  * 环境变量：JWT_SECRET, AUTH_SECRET
- 支付：Stripe
  * 环境变量：
    - STRIPE_SECRET_KEY
    - STRIPE_WEBHOOK_SECRET
    - NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY

## 订阅模型
- 层级：免费版、基础版、专业版、企业版
- 必须提供功能对比表
- 突出显示推荐方案

## 使用限制
### 免费版
- 限制每日请求次数
- 仅提供基础功能

### 付费版
- 阶梯式提升使用限制
- 提供独特的高级功能

@app/api/auth/config.ts
@app/api/payment/stripe.ts
